(()=>{"use strict";var t,e,n={147:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActionPoints=void 0;var n=function(){function t(){this.span=document.getElementById("actionPointsSpan"),this.current=1,this.total=1,this.tentative=0}return t.prototype.startTurn=function(){10!==this.total&&this.total++,this.current=this.total,this.render()},t.prototype.tentativeSpend=function(t){this.tentative=t,this.render()},t.prototype.spend=function(){this.current-=this.tentative,this.tentative=0,this.render()},t.prototype.clearSpend=function(){this.tentative=0,this.render()},t.prototype.render=function(){var t="";t+="ðŸŸ©".repeat(this.current-this.tentative),t+="ðŸŸ¨".repeat(this.tentative),t+="ðŸŸ¥".repeat(this.total-this.current),this.span.innerText=t},t}();e.ActionPoints=n},784:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Game=void 0;var i=n(233),r=function(){function t(t){this.deckSelects=0,this.turnEnds=0,this.animationEnds=0,this.players=t;for(var e=0,n=t;e<n.length;e++){var r=n[e];r.turnEndCallback=this.endTurnForPlayer.bind(this),r.deckSelectEndCallback=this.selectDeckForPlayer.bind(this),r.animationEndCallback=this.endAnimationsForPlayer.bind(this),r.startDeckSelect()}this.turnState=i.TurnState.SELECTING_DECK}return t.prototype.selectDeckForPlayer=function(){if(this.deckSelects++,this.deckSelects===this.players.length){this.turnState=i.TurnState.TURN_ACTIVE;for(var t=0,e=this.players;t<e.length;t++)e[t].startGame();this.deckSelects=0}},t.prototype.endTurnForPlayer=function(){if(this.turnEnds++,this.turnEnds===this.players.length){this.turnState=i.TurnState.ANIMS_PLAYING;for(var t=0,e=this.players;t<e.length;t++)e[t].startPlayingAnimations();this.turnEnds=0}},t.prototype.endAnimationsForPlayer=function(){if(this.animationEnds++,this.animationEnds===this.players.length){this.turnState=i.TurnState.TURN_ACTIVE;for(var t=0,e=this.players;t<e.length;t++)e[t].startTurn();this.animationEnds=0}},t}();e.Game=r},924:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ingredients=void 0;var i=n(233),r={name:"white bread",cost:1,power:1,effect:function(t){t.ingredients.map((function(t){return t.power++,t}))},type:i.IngredientType.MEAT,effectText:"",flavorText:"the plainest option"},a={name:"bacon",cost:1,power:1,effect:function(t){t.ingredients.map((function(t){return t.power++,t}))},type:i.IngredientType.MEAT,effectText:"on complete, add one to each ingredient in this sandwich",flavorText:"bacon goes on everything"},s=new Map;e.ingredients=s,s.set("bacon",a),s.set("white bread",r)},346:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LocalPlayer=void 0;var i=n(147),r=n(924),a=n(579),s=function(){function t(){this.ingredientDiv=document.getElementById("ingredients"),this.availableIngredients=["white bread","bacon"],this.ingredientCounts=Array(this.availableIngredients.length).fill(0),this.ingredientDOMs=[],this.boardDiv=document.getElementById("myBoard"),this.sandwiches=[],this.actionPoints=new i.ActionPoints}return t.prototype.startDeckSelect=function(){this.deckSelectEndCallback()},t.prototype.startGame=function(){for(var t=0;t<this.ingredientCounts.length;++t)this.ingredientCounts[t]=0;this.constructDOM()},t.prototype.constructDOM=function(){this.ingredientDiv.innerHTML="";for(var t=0;t<this.availableIngredients.length;++t){var e=document.createElement("div");e.className="tooltip",e.draggable=!0;var n=document.createElement("span");e.appendChild(n);var i=document.createElement("span");i.className="tooltipText";var a=r.ingredients.get(this.availableIngredients[t]);i.innerHTML="".concat(a.name,": ").concat(a.cost,"/").concat(a.power,"<br><br>"),""!==a.effectText&&(i.innerHTML+="".concat(a.effectText,"<br><br>")),i.innerHTML+="<i>".concat(a.flavorText,"</i>"),e.ondragstart=this.dragCard.bind(this,t),e.ondragend=this.stopDrag.bind(this),e.onmouseover=this.hoverCard.bind(this,t),e.onmouseout=this.unhoverCard.bind(this),e.appendChild(i),this.ingredientDiv.appendChild(e),this.ingredientDOMs.push(n)}this.boardDiv.innerHTML="",this.createEmptyStack(),this.render(),document.getElementById("endTurnButton").onclick=this.endTurn.bind(this)},t.prototype.render=function(){for(var t=0;t<this.ingredientDOMs.length;++t){var e=this.availableIngredients[t];this.ingredientDOMs[t].innerText="".concat(e,": ").concat(this.ingredientCounts[t])}this.actionPoints.render()},t.prototype.startTurn=function(){this.actionPoints.startTurn(),this.drawCards(),this.render()},t.prototype.endTurn=function(){this.turnEndCallback()},t.prototype.drawCards=function(){for(var t=this.availableIngredients.length,e=0;e<3;++e){var n=Math.floor(Math.random()*t);this.ingredientCounts[n]++}this.render()},t.prototype.createEmptyStack=function(){var t=document.createElement("div");t.ondrop=function(){return alert("asdf")},this.boardDiv.appendChild(t);var e=new a.Sandwich(t);this.sandwiches.push(e)},t.prototype.canPlay=function(t){return r.ingredients.get(this.availableIngredients[t]).cost<=this.actionPoints.current&&this.ingredientCounts[t]>0},t.prototype.hoverCard=function(t,e){e.stopPropagation();var n=e.target.parentElement;this.canPlay(t)?n.classList.add("canPlay"):n.classList.add("cantPlay")},t.prototype.unhoverCard=function(t){t.stopPropagation();var e=t.target.parentElement;e.classList.remove("canPlay"),e.classList.remove("cantPlay")},t.prototype.dragCard=function(t,e){if(e.stopPropagation(),this.canPlay(t)){var n=r.ingredients.get(this.availableIngredients[t]);e.dataTransfer.setData("ingId",t.toString()),e.dataTransfer.dropEffect="copy",e.target.classList.add("dragging"),this.actionPoints.tentativeSpend(n.cost)}else e.preventDefault()},t.prototype.stopDrag=function(t){t.stopPropagation(),t.target.classList.remove("dragging"),this.actionPoints.clearSpend()},t.prototype.dropHandler=function(t,e){e.stopPropagation(),e.preventDefault();var n=e.dataTransfer.getData("ingId"),i=document.createElement("div"),a=document.createElement("span"),s=this.availableIngredients[n];a.innerText=r.ingredients.get(s).name,this.ingredientCounts[n]--,this.actionPoints.spend(),this.render(),i.appendChild(a);var o=this.sandwiches[t].div;o.insertBefore(i,o.firstChild)},t.prototype.startPlayingAnimations=function(){this.animationEndCallback()},t}();e.LocalPlayer=s},579:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Sandwich=void 0;var n=function(){function t(t){this.ingredients=[],this.div=t}return t.prototype.close=function(){for(var t=0,e=this.ingredients;t<e.length;t++)e[t].effect(this)},t}();e.Sandwich=n},233:(t,e)=>{var n,i;Object.defineProperty(e,"__esModule",{value:!0}),e.TurnState=e.IngredientType=void 0,function(t){t[t.BREAD=0]="BREAD",t[t.MEAT=1]="MEAT",t[t.VEGETABLE=2]="VEGETABLE",t[t.CONDIMENT=3]="CONDIMENT"}(n||(e.IngredientType=n={})),function(t){t[t.SELECTING_DECK=0]="SELECTING_DECK",t[t.TURN_ACTIVE=1]="TURN_ACTIVE",t[t.ANIMS_PLAYING=2]="ANIMS_PLAYING",t[t.GAME_END=3]="GAME_END"}(i||(e.TurnState=i={}))}},i={};function r(t){var e=i[t];if(void 0!==e)return e.exports;var a=i[t]={exports:{}};return n[t](a,a.exports,r),a.exports}t=r(784),e=new(r(346).LocalPlayer),new t.Game([e])})();